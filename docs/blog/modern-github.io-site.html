<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Build a Modern GitHub Page Site Using Next.js</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/ec51ddd346115c33a499.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ec51ddd346115c33a499.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-ceab71ff4af1e6f937e6.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1d36bc031662b4dc4c28.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.cb82874e43d6dd0d0fae.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-99ac7bdef7dc032ee907.js" as="script"/><link rel="preload" href="/_next/static/chunks/caf50c98c9495f1588207cc992c654a0de47b2a6.90d8e29e0d9ce25c09a5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-d3ea0146524ae2cb3165.js" as="script"/></head><body><div id="__next"><div class="container"><div class="Header"><div class="Header__linkContainer"><a class="Header__link" href="/">Home</a><a class="Header__link" href="/projects">Projects</a><a class="Header__link" href="/about">About</a></div><div class="Header__logo">Jason P.</div><hr/></div><div class="Post"><div class="Post__title">Build a Modern GitHub Page Site Using Next.js</div><div class="Post__date">2020-09-24</div><div class="markdown"><h2>Background</h2><p>I recently decided to start a tech blog that would be hosted as a static site using GitHub Pages. I had previously seen that these static sites could be generated with Jekyll. But I don’t know Jekyll and don’t have any experience with Ruby. So I did some research into if React could be used and that&#x27;s how I found <a href="https://nextjs.org/">Next.js</a>. I read through a lot of Next.js tutorials but couldn&#x27;t find exactly what I was looking for. I wanted a site that could render GitHub style markdown as well as highlight code blocks. It took me a day to figure out how to implement everything and I thought other people might be interested in the same features. So I put together this guide that is a combination of what I learned and the tutorials from <a href="https://css-tricks.com/building-a-blog-with-next-js/">CSS-Tricks</a>, <a href="https://raskin.me/blog/beautify-code-in-your-next-js-blog">Perry Raskin</a>, and <a href="https://dev.to/jfelx/how-to-make-a-static-blog-with-next-js-2bd6">Jose Felix</a>. This guide will be for a very basic site. I&#x27;ll add another post that will address more features such as SEO at a later time.</p><h2>Initial Setup</h2><p>To start off, we’ll use Next.js’s app boilerplate to generate an initial project</p><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-sh"><span style="color:#568c3b">npx </span><span style="color:#935c25">create-next-app</span><span> &lt;</span><span style="color:#568c3b">blog </span><span style="color:#568c3b">name&gt;</span><span> </span><span style="color:#935c25">--use-npm</span></code></pre><p>Once the script is complete, <em>cd</em> into the project directory. You&#x27;ll be able to see the boilerplate app at <a href="http://localhost:3000">http://localhost:3000</a> after running</p><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-sh"><span>npm </span><span style="color:#6b6bb8">run</span><span class="bash"> dev</span></code></pre><p>We&#x27;ll need a few packages for the features we want so go ahead and install the required dependencies using</p><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-sh"><span>npm install --</span><span style="color:#935c25">save</span><span>-</span><span style="color:#935c25">dev</span><span> raw-loader gray-matter react-markdown react-syntax-highlighter</span></code></pre><h3>raw-loader</h3><p><a href="https://www.npmjs.com/package/raw-loader">raw-loader</a> allows us to import text files as if they were a module using the ES6 import statement</p><h3>gray-matter</h3><p><a href="https://www.npmjs.com/package/gray-matter">gray-matter</a> is used to parse the front-matter information in your markdown files</p><h3>react-markdown</h3><p><a href="https://www.npmjs.com/package/react-markdown">react-markdown</a> converts markdown files into html</p><h3>react-syntax-highlighter</h3><p><a href="https://www.npmjs.com/package/react-syntax-highlighter">react-syntax-highlighter</a> is used as a code block renderer within react-markdown to highlight code blocks</p><h2>Create the Static Site</h2><p>Next.js uses React behind the scenes to render pages. Each React file inside the <em>/pages</em> folder will be rendered as a static page. For example, <em>/pages/about.js</em> will be rendered at <em>/about</em> and <em>/pages/blog/first-post.js</em> at <em>/blog/first-post</em>. The only exception is <em>index.js</em>, which will be rendered at <em>/</em>. Next.js can also handle dynamic routing using slugs and a <em>[<!-- -->slug<!-- -->]<!-- -->.js</em> component. It will also route you to a default 404 page for non-existent components.</p><p>The entry point for Next.js is <em>/pages/index.js</em>. You can modify the JSX within it and you&#x27;ll see Next.js takes care of hot reloading the page with updates. Let&#x27;s start by deleting <em>/pages/api</em> and simpliflying <em>Home</em> with a placeholder:</p><h4>/pages/index.js</h4><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-jsx"><span>// import Head from &#x27;next/head&#x27;
</span>// import styles from &#x27;../styles/Home.module.css&#x27;
<!-- -->
<span></span><span style="color:#935c25">export</span><span style="color:#935c25"> default </span><span>function Home() {
</span>  return (
<!-- -->    &lt;div&gt;
<!-- -->      &lt;h1&gt;hello&lt;/h1&gt;
<!-- -->    &lt;/div&gt;
<!-- -->  )
<!-- -->}
</code></pre><p>next let&#x27;s create two blog posts and place them inside of <em>_<!-- -->posts</em> at your project&#x27;s root directory</p><h4>/<!-- -->_<!-- -->posts/first-post.md</h4><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-md"><span style="color:#935c25">---</span><span>
</span><span></span><span class="hljs-attr">title:</span><span> </span><span style="color:#568c3b">First</span><span> </span><span style="color:#568c3b">Post</span><span>
</span><span></span><span class="hljs-attr">description:</span><span> </span><span style="color:#568c3b">Sample</span><span> </span><span style="color:#568c3b">First</span><span> </span><span style="color:#568c3b">Post</span><span>
</span><span></span><span class="hljs-attr">date:</span><span> </span><span style="color:#935c25">2020-09-24</span><span>
</span><span></span><span style="color:#935c25">---</span><span>
</span>
<span></span><span style="color:#5a7b8c"># Header 1</span><span>
</span>
<span></span><span style="color:#5a7b8c">## Header 2</span><span>
</span>
<span></span><span style="color:#5a7b8c">### Header 3</span><span>
</span>
<span></span><span style="color:#5a7b8c">#### header 4</span><span>
</span>
<span></span><span style="color:#5a7b8c">## Table of Contents</span><span>
</span>
<span></span><span style="color:#568c3b">-</span><span> </span><span style="color:#568c3b">Implements</span><span> [</span><span style="color:#568c3b">GitHub</span><span> </span><span style="color:#568c3b">Flavored</span><span> </span><span style="color:#568c3b">Markdown</span><span>]</span><span style="color:#568c3b">(https://github.github.com/gfm/)</span><span>
</span><span></span><span style="color:#568c3b">-</span><span> </span><span style="color:#568c3b">Renders</span><span> </span><span style="color:#568c3b">actual,</span><span> </span><span style="color:#568c3b">&quot;native&quot;</span><span> </span><span style="color:#568c3b">React</span><span> </span><span style="color:#568c3b">DOM</span><span> </span><span style="color:#568c3b">elements</span><span>
</span><span></span><span style="color:#568c3b">-</span><span> </span><span style="color:#568c3b">Allows</span><span> </span><span style="color:#568c3b">you</span><span> </span><span style="color:#568c3b">to</span><span> </span><span style="color:#568c3b">escape</span><span> </span><span style="color:#568c3b">or</span><span> </span><span style="color:#568c3b">skip</span><span> </span><span style="color:#568c3b">HTML</span><span> </span><span style="color:#568c3b">(try</span><span> </span><span style="color:#568c3b">toggling</span><span> </span><span style="color:#568c3b">the</span><span> </span><span style="color:#568c3b">checkboxes</span><span> </span><span style="color:#568c3b">above)</span><span>
</span><span></span><span style="color:#568c3b">-</span><span> </span><span style="color:#568c3b">If</span><span> </span><span style="color:#568c3b">you</span><span> </span><span style="color:#568c3b">escape</span><span> </span><span style="color:#568c3b">or</span><span> </span><span style="color:#568c3b">skip</span><span> </span><span style="color:#568c3b">the</span><span> </span><span style="color:#568c3b">HTML,</span><span> </span><span style="color:#935c25">no</span><span> </span><span style="color:#568c3b">`dangerouslySetInnerHTML`</span><span> </span><span style="color:#568c3b">is</span><span> </span><span style="color:#568c3b">used!</span><span> </span><span style="color:#568c3b">Yay!</span><span>
</span>
<span></span><span style="color:#5a7b8c">## HTML block below</span><span>
</span>
<span></span><span style="color:#568c3b">&gt;</span><span> </span><span style="color:#568c3b">This</span><span> </span><span style="color:#568c3b">blockquote</span><span> </span><span style="color:#568c3b">will</span><span> </span><span style="color:#568c3b">change</span><span> </span><span style="color:#568c3b">based</span><span> </span><span style="color:#568c3b">on</span><span> </span><span style="color:#568c3b">the</span><span> </span><span style="color:#568c3b">HTML</span><span> </span><span style="color:#568c3b">settings</span><span> </span><span style="color:#568c3b">above.</span><span>
</span>
<span></span><span style="color:#5a7b8c">## Tables?</span><span>
</span>
<span></span><span style="color:#568c3b">|</span><span> </span><span style="color:#568c3b">Feature</span><span>   </span><span style="color:#568c3b">|</span><span> </span><span style="color:#568c3b">Support</span><span> </span><span style="color:#568c3b">|
</span><span style="color:#568c3b">| --------- | ------- |
</span><span style="color:#568c3b">| tables    | ✔       |
</span><span style="color:#568c3b">| alignment | ✔       |
</span><span style="color:#568c3b">| wewt      | ✔       |
</span></code></pre><h4>/<!-- -->_<!-- -->posts/second-post.md</h4><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-md"><span style="color:#935c25">---</span><span>
</span><span></span><span class="hljs-attr">title:</span><span> </span><span style="color:#568c3b">Second</span><span> </span><span style="color:#568c3b">Post</span><span>
</span><span></span><span class="hljs-attr">description:</span><span> </span><span style="color:#568c3b">Sample</span><span> </span><span style="color:#568c3b">Second</span><span> </span><span style="color:#568c3b">Post</span><span>
</span><span></span><span class="hljs-attr">date:</span><span> </span><span style="color:#935c25">2020-09-25</span><span>
</span><span></span><span style="color:#935c25">---</span><span>
</span>
<span></span><span style="color:#5a7b8c">## Python code block</span><span>
</span>
<span></span><span style="color:#568c3b">```python</span><span>
</span><span></span><span style="color:#568c3b">import</span><span> </span><span style="color:#568c3b">numpy</span><span> </span><span style="color:#568c3b">as</span><span> </span><span style="color:#568c3b">np</span><span>
</span>
<span></span><span style="color:#568c3b">def</span><span> </span><span style="color:#568c3b">hello():</span><span>
</span><span>    </span><span style="color:#568c3b">print(&#x27;this</span><span> </span><span style="color:#568c3b">is</span><span> </span><span style="color:#568c3b">working&#x27;)</span><span>
</span><span></span><span style="color:#568c3b">```</span><span>
</span>
<span></span><span style="color:#5a7b8c">## JS code block</span><span>
</span>
<span></span><span style="color:#568c3b">```js</span><span>
</span><span></span><span style="color:#568c3b">import</span><span> </span><span style="color:#568c3b">React</span><span> </span><span style="color:#568c3b">from</span><span> </span><span style="color:#568c3b">&#x27;react&#x27;</span><span>
</span><span></span><span style="color:#568c3b">console.log(&#x27;this</span><span> </span><span style="color:#568c3b">is</span><span> </span><span style="color:#568c3b">working&#x27;)</span><span>
</span><span></span><span style="color:#568c3b">```</span></code></pre><p>We&#x27;ll create two api functions for our app. The first function will find all markdown files in <em>_<!-- -->posts</em> and return an object with its front-matter information. The second function will return the contents of a markdown file given its file slug.</p><h4>/api.js</h4><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-js"><span style="color:#6b6bb8">import</span><span> matter </span><span style="color:#6b6bb8">from</span><span> </span><span style="color:#568c3b">&#x27;gray-matter&#x27;</span><span>
</span>
<span></span><span style="color:#6b6bb8">export</span><span> </span><span style="color:#6b6bb8">const</span><span> getAllPosts = </span><span style="color:#6b6bb8">async</span><span> () =&gt; {
</span><span>  </span><span style="color:#6b6bb8">const</span><span> context = </span><span style="color:#935c25">require</span><span>.context(</span><span style="color:#568c3b">&#x27;./_posts&#x27;</span><span>, </span><span style="color:#935c25">false</span><span>, </span><span style="color:#d22d72">/\.md$/</span><span>)
</span><span>  </span><span style="color:#6b6bb8">const</span><span> posts = []
</span><span>  </span><span style="color:#6b6bb8">for</span><span> (</span><span style="color:#6b6bb8">const</span><span> path </span><span style="color:#6b6bb8">of</span><span> context.keys()) {
</span><span>    </span><span style="color:#6b6bb8">const</span><span> fileName = path.slice(</span><span style="color:#935c25">2</span><span>)
</span><span>    </span><span style="color:#6b6bb8">const</span><span> post = </span><span style="color:#6b6bb8">await</span><span> </span><span style="color:#6b6bb8">import</span><span>(`.</span><span style="color:#d22d72">/_posts/</span><span>${fileName}`)
</span><span>    </span><span style="color:#6b6bb8">const</span><span> content = matter(post.</span><span style="color:#6b6bb8">default</span><span>)
</span>    posts.push({
<span>      slug: fileName.replace(</span><span style="color:#568c3b">&#x27;.md&#x27;</span><span>, </span><span style="color:#568c3b">&#x27;&#x27;</span><span>),
</span>      title: content.data.title,
<!-- -->      description: content.data.description,
<!-- -->    })
<!-- -->  }
<span>  </span><span style="color:#6b6bb8">return</span><span> posts
</span>}
<!-- -->
<span></span><span style="color:#6b6bb8">export</span><span> </span><span style="color:#6b6bb8">const</span><span> getPostBySlug = </span><span style="color:#6b6bb8">async</span><span> (slug) =&gt; {
</span><span>  </span><span style="color:#6b6bb8">const</span><span> post = </span><span style="color:#6b6bb8">await</span><span> </span><span style="color:#6b6bb8">import</span><span>(`.</span><span style="color:#d22d72">/_posts/</span><span>${slug}.md`)
</span><span>  </span><span style="color:#6b6bb8">const</span><span> content = matter(post.</span><span style="color:#6b6bb8">default</span><span>)
</span>  content.data.date = content.data.date.toString()
<span>  </span><span style="color:#6b6bb8">return</span><span> {
</span>    data: content.data,
<!-- -->    content: content.content,
<!-- -->  }
<!-- -->}
</code></pre><p>Both functions will import the markdown files using the ES6 import style. For this to work correctly, we&#x27;ll need to tell Next.js to use raw-loader on the files. This is done with a configuration file. You may need to restart your Next.js development server to ensure this configuration is set. Just to be safe, ctrl+c and restart your dev server.</p><h4>/next.config.js</h4><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-js"><span>module.exports = {
</span><span>  target: </span><span style="color:#568c3b">&#x27;serverless&#x27;</span><span>,
</span>  webpack: function (config) {
<span>    config.module.rules.push({test: /\.md$/, use: </span><span style="color:#568c3b">&#x27;raw-loader&#x27;</span><span>})
</span><span>    return</span><span style="color:#935c25"> config
</span><span style="color:#935c25"></span><span>  },
</span>}
</code></pre><p>We want an array of all posts every time <em>index.js</em> is loaded in order to list them. We can get this by adding the below code to <em>index.js</em>. Next.js runs it every time <em>index.js</em> is loaded and passes props to <em>index.js</em>&#x27;s default function.</p><h4>/pages/index.js</h4><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-js"><span style="color:#6b6bb8">export</span><span> </span><span style="color:#6b6bb8">const</span><span> getStaticProps = </span><span style="color:#6b6bb8">async</span><span> (context) =&gt; {
</span><span>  </span><span style="color:#6b6bb8">const</span><span> posts = </span><span style="color:#6b6bb8">await</span><span> getAllPosts()
</span><span>  </span><span style="color:#6b6bb8">return</span><span> {
</span>    props: {
<!-- -->      posts: posts,
<!-- -->    },
<!-- -->  }
<!-- -->}
</code></pre><p>Let&#x27;s go back to <em>Home</em> and modify it now that we&#x27;re getting an array of all available posts. We&#x27;ll display each post&#x27;s title as a link in an unordered list:</p><h4>/pages/index.js</h4><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code><span style="color:#6b6bb8">import</span><span> Link </span><span style="color:#6b6bb8">from</span><span> </span><span style="color:#568c3b">&#x27;next/link&#x27;</span><span>
</span><span></span><span style="color:#6b6bb8">import</span><span> {getAllPosts} </span><span style="color:#6b6bb8">from</span><span> </span><span style="color:#568c3b">&#x27;../api&#x27;</span><span>
</span>
<span></span><span style="color:#6b6bb8">export</span><span> </span><span style="color:#6b6bb8">default</span><span> </span><span class="hljs-function" style="color:#6b6bb8">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#257fad">Home</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#935c25">{posts}</span><span class="hljs-function">) </span><span>{
</span><span>  </span><span style="color:#6b6bb8">return</span><span> (
</span><span>    </span><span class="xml" style="color:#d22d72">&lt;</span><span class="xml" style="color:#d22d72">div</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">      </span><span class="xml" style="color:#d22d72">&lt;</span><span class="xml" style="color:#d22d72">ul</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">        {posts.map((post, i) =&gt; {
</span><span class="xml">          return (
</span><span class="xml">            </span><span class="xml" style="color:#d22d72">&lt;</span><span class="xml" style="color:#d22d72">li</span><span class="xml" style="color:#d22d72"> </span><span class="xml hljs-attr" style="color:#d22d72">key</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">{i}</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">              </span><span class="xml" style="color:#d22d72">&lt;</span><span class="xml" style="color:#d22d72">Link</span><span class="xml" style="color:#d22d72"> </span><span class="xml hljs-attr" style="color:#d22d72">href</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">{</span><span class="xml" style="color:#d22d72">&#x27;/</span><span class="xml hljs-attr" style="color:#d22d72">blog</span><span class="xml" style="color:#d22d72">/[</span><span class="xml hljs-attr" style="color:#d22d72">slug</span><span class="xml" style="color:#d22d72">]&#x27;} </span><span class="xml hljs-attr" style="color:#d22d72">as</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">{</span><span class="xml" style="color:#d22d72">`/</span><span class="xml hljs-attr" style="color:#d22d72">blog</span><span class="xml" style="color:#d22d72">/${</span><span class="xml hljs-attr" style="color:#d22d72">post.slug</span><span class="xml" style="color:#d22d72">}`}&gt;</span><span class="xml">
</span><span class="xml">                </span><span class="xml" style="color:#d22d72">&lt;</span><span class="xml" style="color:#d22d72">a</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">{post.title}</span><span class="xml" style="color:#d22d72">&lt;/</span><span class="xml" style="color:#d22d72">a</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">              </span><span class="xml" style="color:#d22d72">&lt;/</span><span class="xml" style="color:#d22d72">Link</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">            </span><span class="xml" style="color:#d22d72">&lt;/</span><span class="xml" style="color:#d22d72">li</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">          )
</span><span class="xml">        })}
</span><span class="xml">      </span><span class="xml" style="color:#d22d72">&lt;/</span><span class="xml" style="color:#d22d72">ul</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">    </span><span class="xml" style="color:#d22d72">&lt;/</span><span class="xml" style="color:#d22d72">div</span><span class="xml" style="color:#d22d72">&gt;</span><span>
</span>  )
<!-- -->}
<!-- -->
<span></span><span style="color:#6b6bb8">export</span><span> </span><span style="color:#6b6bb8">const</span><span> getStaticProps = </span><span style="color:#6b6bb8">async</span><span> (context) =&gt; {
</span><span>  </span><span style="color:#6b6bb8">const</span><span> posts = </span><span style="color:#6b6bb8">await</span><span> getAllPosts()
</span><span>  </span><span style="color:#6b6bb8">return</span><span> {
</span><span>    </span><span class="hljs-attr">props</span><span>: {
</span><span>      </span><span class="hljs-attr">posts</span><span>: posts,
</span>    },
<!-- -->  }
<!-- -->}
</code></pre><p>With this you should see a list of your two posts now. They might not look like a typical link though. This is because of Next.js&#x27;s default css. You can either turn off the entire css by commenting out the import in <em>/pages/<!-- -->_<!-- -->app.js</em> or commenting out the <em>a</em> tag css in <em>/styles/globals.css</em>.</p><p>Clicking on the link will result in a 404 route. Let&#x27;s fix that with dynamic routing. Create a dynamic component with the following code</p><h4>pages/blog/<!-- -->[<!-- -->slug<!-- -->]<!-- -->.js</h4><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-jsx"><span style="color:#6b6bb8">import</span><span> {getPostBySlug, getAllPosts} </span><span style="color:#6b6bb8">from</span><span> </span><span style="color:#568c3b">&#x27;../../api&#x27;</span><span>
</span><span></span><span style="color:#6b6bb8">import</span><span> ReactMarkdown </span><span style="color:#6b6bb8">from</span><span> </span><span style="color:#568c3b">&#x27;react-markdown&#x27;</span><span>
</span>
<span></span><span style="color:#6b6bb8">const</span><span> Post = </span><span class="hljs-function">(</span><span class="hljs-function" style="color:#935c25">{data, content}</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>  </span><span style="color:#6b6bb8">return</span><span> (
</span><span>    </span><span class="xml" style="color:#d22d72">&lt;</span><span class="xml" style="color:#d22d72">div</span><span class="xml" style="color:#d22d72"> </span><span class="xml hljs-attr" style="color:#d22d72">className</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">&quot;container&quot;</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">      </span><span class="xml" style="color:#d22d72">&lt;</span><span class="xml" style="color:#d22d72">div</span><span class="xml" style="color:#d22d72"> </span><span class="xml hljs-attr" style="color:#d22d72">className</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">&quot;Post&quot;</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">        </span><span class="xml" style="color:#d22d72">&lt;</span><span class="xml" style="color:#d22d72">ReactMarkdown</span><span class="xml" style="color:#d22d72"> </span><span class="xml hljs-attr" style="color:#d22d72">source</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">{content}</span><span class="xml" style="color:#d22d72"> /&gt;</span><span class="xml">
</span><span class="xml">      </span><span class="xml" style="color:#d22d72">&lt;/</span><span class="xml" style="color:#d22d72">div</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">    </span><span class="xml" style="color:#d22d72">&lt;/</span><span class="xml" style="color:#d22d72">div</span><span class="xml" style="color:#d22d72">&gt;</span><span>
</span>  )
<!-- -->}
<!-- -->
<span></span><span style="color:#6b6bb8">export</span><span> </span><span style="color:#6b6bb8">const</span><span> getStaticProps = </span><span style="color:#6b6bb8">async</span><span> (context) =&gt; {
</span><span>  </span><span style="color:#6b6bb8">return</span><span> {
</span><span>    </span><span class="hljs-attr">props</span><span>: </span><span style="color:#6b6bb8">await</span><span> getPostBySlug(context.params.slug),
</span>  }
<!-- -->}
<!-- -->
<span></span><span style="color:#6b6bb8">export</span><span> </span><span style="color:#6b6bb8">const</span><span> getStaticPaths = </span><span style="color:#6b6bb8">async</span><span> () =&gt; {
</span><span>  </span><span style="color:#6b6bb8">let</span><span> paths = </span><span style="color:#6b6bb8">await</span><span> getAllPosts()
</span><span>  paths = paths.map(</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#935c25">post</span><span class="hljs-function">) =&gt;</span><span> ({
</span><span>    </span><span class="hljs-attr">params</span><span>: {</span><span class="hljs-attr">slug</span><span>: post.slug},
</span>  }))
<span>  </span><span style="color:#6b6bb8">return</span><span> {
</span><span>    </span><span class="hljs-attr">paths</span><span>: paths,
</span><span>    </span><span class="hljs-attr">fallback</span><span>: </span><span style="color:#935c25">false</span><span>,
</span>  }
<!-- -->}
<!-- -->
<span></span><span style="color:#6b6bb8">export</span><span> </span><span style="color:#6b6bb8">default</span><span> Post</span></code></pre><p><em>getStaticPaths</em> is run first by Next.js and it uses <em>getAllPosts</em> to define a list of paths that have to be rendered to HTML at build time. <em>getStaticProps</em> is then run by Next.js to generate dynamic props that are passed to the file&#x27;s default component. It find&#x27;s the dynamic route&#x27;s slug, and executes <em>getPostBySlug</em> to pass <em>Post</em> the post&#x27;s data as a prop. That data is the raw post file in string form. Within <em>Post</em> that raw markdown is converted into nicely formatted HTML using <em>react-markdown</em>. With the <em>[<!-- -->slug<!-- -->]<!-- -->.js</em> file created, you should be able to click each link and see your sample posts rendered with HTML.</p><p>If you take a look at <em>post-one</em> you&#x27;ll notice that it&#x27;s now rendered in HTML but it&#x27;s not nicely styled the way GitHub handles markdown. If you want the styling to be similar to GitHub, you&#x27;ll need to install <em>github-markdown.css</em></p><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-sh"><span>npm </span><span style="color:#6b6bb8">install</span><span> github-markdown-css</span></code></pre><p>Next you&#x27;ll need to import the stylesheet globally. This is done in <em>/pages/<!-- -->_<!-- -->app.js</em>.</p><h4>/pages/<!-- -->_<!-- -->app.js</h4><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-jsx"><span>import </span><span style="color:#568c3b">&#x27;github-markdown-css/github-markdown.css&#x27;</span><span>
</span>
<!-- -->function MyApp({Component, pageProps}) {
<span>  return &lt;Component {</span><span style="color:#935c25">..</span><span>.pageProps} /&gt;
</span>}
<!-- -->
<span></span><span style="color:#935c25">export</span><span style="color:#935c25"> default </span><span>MyApp</span></code></pre><p>And one last thing. The styles provided by <em>github-markdown-css</em> target only elements within a <em>markdown-body</em> class. So go back to <em>[<!-- -->slug<!-- -->]<!-- -->.js</em> and add a classname to the <em>Reactmarkdown</em> component</p><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-jsx"><span style="color:#d22d72">&lt;</span><span style="color:#d22d72">ReactMarkdown</span><span style="color:#d22d72"> </span><span class="hljs-attr" style="color:#d22d72">source</span><span style="color:#d22d72">=</span><span style="color:#568c3b">{content}</span><span style="color:#d22d72"> </span><span class="hljs-attr" style="color:#d22d72">className</span><span style="color:#d22d72">=</span><span style="color:#568c3b">&quot;markdown-body&quot;</span><span style="color:#d22d72"> /&gt;</span></code></pre><p>Now if you refresh the page, you&#x27;ll notice a nicely rendered, GitHub style page. However, if you check out <em>second-post</em>, you&#x27;ll see that the codeblocks don&#x27;t look great. The blocks aren&#x27;t highlighting the code. Let&#x27;s take care of that.</p><p>Back in <em>[<!-- -->slug<!-- -->]<!-- -->.js</em>, we&#x27;ll need to do a few imports. I&#x27;ll be using <a href="https://www.npmjs.com/package/highlight.js">highlight.js</a> but you can use <a href="https://www.npmjs.com/package/prismjs">Prism</a> if you like. You&#x27;ll also have to decide on a styling theme. Thankfully, the <em>react-syntax-highlighter</em> team have created a awesome <a href="https://react-syntax-highlighter.github.io/react-syntax-highlighter/demo/">demo site</a> where you can try out different themes to see what you like. Just select your desired syntax highlighter (<em>highlight.js</em> or <em>Prism</em>) then scroll through the different themes until you find something you like. I&#x27;ll go with the <em>github</em> style for this guide:</p><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-jsx"><span style="color:#5a7b8c">//using highlight.js</span><span>
</span><span></span><span style="color:#6b6bb8">import</span><span> {Light </span><span style="color:#6b6bb8">as</span><span> SyntaxHighlighter} </span><span style="color:#6b6bb8">from</span><span> </span><span style="color:#568c3b">&#x27;react-syntax-highlighter&#x27;</span><span>
</span><span></span><span style="color:#6b6bb8">const</span><span> github = </span><span style="color:#935c25">require</span><span>(</span><span style="color:#568c3b">&#x27;react-syntax-highlighter/dist/cjs/styles/hljs/github&#x27;</span><span>)
</span>  .default
<!-- -->
<span></span><span style="color:#5a7b8c">//using Prism</span><span>
</span><span></span><span style="color:#6b6bb8">import</span><span> {Prism </span><span style="color:#6b6bb8">as</span><span> SyntaxHighlighter} </span><span style="color:#6b6bb8">from</span><span> </span><span style="color:#568c3b">&#x27;react-syntax-highlighter&#x27;</span><span>
</span><span></span><span style="color:#6b6bb8">const</span><span> github = </span><span style="color:#935c25">require</span><span>(</span><span style="color:#568c3b">&#x27;react-syntax-highlighter/dist/cjs/styles/prism/github&#x27;</span><span>)
</span>  .default
</code></pre><p>After importing those libraries, you&#x27;ll need to make a code block component and pass that to <em>ReactMarkdown</em> as a renderers prop. You&#x27;re final <em>[<!-- -->slug<!-- -->]<!-- -->.js</em> should look like this</p><h4>/pages/blog/<!-- -->[<!-- -->slug<!-- -->]<!-- -->.js</h4><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-jsx"><span style="color:#6b6bb8">import</span><span> {getPostBySlug, getAllPosts} </span><span style="color:#6b6bb8">from</span><span> </span><span style="color:#568c3b">&#x27;../../api&#x27;</span><span>
</span><span></span><span style="color:#6b6bb8">import</span><span> ReactMarkdown </span><span style="color:#6b6bb8">from</span><span> </span><span style="color:#568c3b">&#x27;react-markdown&#x27;</span><span>
</span><span></span><span style="color:#6b6bb8">import</span><span> {Light </span><span style="color:#6b6bb8">as</span><span> SyntaxHighlighter} </span><span style="color:#6b6bb8">from</span><span> </span><span style="color:#568c3b">&#x27;react-syntax-highlighter&#x27;</span><span>
</span><span></span><span style="color:#6b6bb8">const</span><span> github = </span><span style="color:#935c25">require</span><span>(</span><span style="color:#568c3b">&#x27;react-syntax-highlighter/dist/cjs/styles/hljs/github&#x27;</span><span>)
</span>  .default
<!-- -->
<span></span><span style="color:#6b6bb8">const</span><span> CodeBlock = </span><span class="hljs-function">(</span><span class="hljs-function" style="color:#935c25">{language, value}</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>  </span><span style="color:#6b6bb8">return</span><span> (
</span><span>    </span><span class="xml" style="color:#d22d72">&lt;</span><span class="xml" style="color:#d22d72">SyntaxHighlighter</span><span class="xml" style="color:#d22d72"> </span><span class="xml hljs-attr" style="color:#d22d72">language</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">{language}</span><span class="xml" style="color:#d22d72"> </span><span class="xml hljs-attr" style="color:#d22d72">style</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">{github}</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">      {value}
</span><span class="xml">    </span><span class="xml" style="color:#d22d72">&lt;/</span><span class="xml" style="color:#d22d72">SyntaxHighlighter</span><span class="xml" style="color:#d22d72">&gt;</span><span>
</span>  )
<!-- -->}
<!-- -->
<span></span><span style="color:#6b6bb8">const</span><span> Post = </span><span class="hljs-function">(</span><span class="hljs-function" style="color:#935c25">{data, content}</span><span class="hljs-function">) =&gt;</span><span> {
</span><span>  </span><span style="color:#6b6bb8">return</span><span> (
</span><span>    </span><span class="xml" style="color:#d22d72">&lt;</span><span class="xml" style="color:#d22d72">div</span><span class="xml" style="color:#d22d72"> </span><span class="xml hljs-attr" style="color:#d22d72">className</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">&quot;container&quot;</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">      </span><span class="xml" style="color:#d22d72">&lt;</span><span class="xml" style="color:#d22d72">div</span><span class="xml" style="color:#d22d72"> </span><span class="xml hljs-attr" style="color:#d22d72">className</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">&quot;Post&quot;</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">        </span><span class="xml" style="color:#d22d72">&lt;</span><span class="xml" style="color:#d22d72">ReactMarkdown</span><span class="xml" style="color:#d22d72">
</span><span class="xml" style="color:#d22d72">          </span><span class="xml hljs-attr" style="color:#d22d72">source</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">{content}</span><span class="xml" style="color:#d22d72">
</span><span class="xml" style="color:#d22d72">          </span><span class="xml hljs-attr" style="color:#d22d72">className</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">&quot;markdown-body&quot;</span><span class="xml" style="color:#d22d72">
</span><span class="xml" style="color:#d22d72">          </span><span class="xml hljs-attr" style="color:#d22d72">renderers</span><span class="xml" style="color:#d22d72">=</span><span class="xml" style="color:#568c3b">{{code:</span><span class="xml" style="color:#d22d72"> </span><span class="xml hljs-attr" style="color:#d22d72">CodeBlock</span><span class="xml" style="color:#d22d72">}}
</span><span class="xml" style="color:#d22d72">        /&gt;</span><span class="xml">
</span><span class="xml">      </span><span class="xml" style="color:#d22d72">&lt;/</span><span class="xml" style="color:#d22d72">div</span><span class="xml" style="color:#d22d72">&gt;</span><span class="xml">
</span><span class="xml">    </span><span class="xml" style="color:#d22d72">&lt;/</span><span class="xml" style="color:#d22d72">div</span><span class="xml" style="color:#d22d72">&gt;</span><span>
</span>  )
<!-- -->}
<!-- -->
<span></span><span style="color:#6b6bb8">export</span><span> </span><span style="color:#6b6bb8">const</span><span> getStaticProps = </span><span style="color:#6b6bb8">async</span><span> (context) =&gt; {
</span><span>  </span><span style="color:#935c25">console</span><span>.log(</span><span style="color:#568c3b">&#x27;generate static props&#x27;</span><span>)
</span><span>  </span><span style="color:#935c25">console</span><span>.log(context)
</span><span>  </span><span style="color:#6b6bb8">return</span><span> {
</span><span>    </span><span class="hljs-attr">props</span><span>: </span><span style="color:#6b6bb8">await</span><span> getPostBySlug(context.params.slug),
</span>  }
<!-- -->}
<!-- -->
<span></span><span style="color:#6b6bb8">export</span><span> </span><span style="color:#6b6bb8">const</span><span> getStaticPaths = </span><span style="color:#6b6bb8">async</span><span> () =&gt; {
</span><span>  </span><span style="color:#935c25">console</span><span>.log(</span><span style="color:#568c3b">&#x27;generate static paths&#x27;</span><span>)
</span><span>  </span><span style="color:#6b6bb8">let</span><span> paths = </span><span style="color:#6b6bb8">await</span><span> getAllPosts()
</span><span>  paths = paths.map(</span><span class="hljs-function">(</span><span class="hljs-function" style="color:#935c25">post</span><span class="hljs-function">) =&gt;</span><span> ({
</span><span>    </span><span class="hljs-attr">params</span><span>: {</span><span class="hljs-attr">slug</span><span>: post.slug},
</span>  }))
<span>  </span><span style="color:#935c25">console</span><span>.log(paths)
</span><span>  </span><span style="color:#6b6bb8">return</span><span> {
</span><span>    </span><span class="hljs-attr">paths</span><span>: paths,
</span><span>    </span><span class="hljs-attr">fallback</span><span>: </span><span style="color:#935c25">false</span><span>,
</span>  }
<!-- -->}
<!-- -->
<span></span><span style="color:#6b6bb8">export</span><span> </span><span style="color:#6b6bb8">default</span><span> Post</span></code></pre><p>With that update, we&#x27;ve completed writing the static site. You can now add posts in markdown format to <em>/<!-- -->_<!-- -->posts</em> and your site will dynamically generate links as well as render them into great looking HTML pages. Now we just need to deploy the necessary files to GitHub.</p><h2>Deploying to GitHub</h2><p>I&#x27;m assuming you&#x27;re familiar with how to push repositories to GitHub. So I won&#x27;t be going over that. There are requirements on repository names, so please checkout<a href="https://pages.github.com/"> GitHub Pages</a> if you don&#x27;t already have one setup. The following steps assume that you have set up a GitHub Page repo and have added its link as a remote repository to your local project.</p><p>Open up <em>package.json</em> and add <em>&quot;export&quot;: &quot;next export -o docs&quot;</em> to the <em>scripts</em> object. This will tell Next.js to export your project into static files within the <em>/docs</em> directory. Now, run the following commands</p><pre style="display:block;overflow-x:auto;background:#ebf8ff;color:#516d7b;padding:0.5em"><code class="language-sh"><span>npm </span><span style="color:#6b6bb8">run</span><span class="bash"> build</span><span>
</span><span>npm </span><span style="color:#6b6bb8">run</span><span class="bash"> </span><span class="bash" style="color:#935c25">export</span></code></pre><p>After the export is complete, you&#x27;ll need to add a blank <em>.nojekyll</em> file within the <em>/docs</em> directory. This is because by default <em>Jekyll</em> ignores any folder with a leading underscore. But we&#x27;re not using <em>Jekyll</em> here and we&#x27;ll need those leading underscore directories. Finally you&#x27;ll need to add, commit and push changes to your GitHub repository. With the push finished, you can go to GitHub and change the <em>Source</em> directory of your GitHub Page to <em>docs</em> using this <a href="https://docs.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site">guide</a>. And that&#x27;s it. It might take a minute for your page to go live, but you have a framework for a blog now.</p><h2>Non-Personal GitHub Page</h2><p>If you&#x27;re building a GitHub Page for one of your repos, you&#x27;ll probably run into problems with page dependencies. Check out this guide by <a href="https://itnext.io/next-js-app-on-github-pages-768020f2b65e">Mikhail Bashurov</a> to see how to solve that.</p></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"title":"Build a Modern GitHub Page Site Using Next.js","description":"A guide to build a GitHub Page blog using Next.js, complete with markdown and code block highlighting","date":"2020-09-24"},"content":"\n## Background\n\nI recently decided to start a tech blog that would be hosted as a static site using GitHub Pages. I had previously seen that these static sites could be generated with Jekyll. But I don’t know Jekyll and don’t have any experience with Ruby. So I did some research into if React could be used and that's how I found [Next.js](https://nextjs.org/). I read through a lot of Next.js tutorials but couldn't find exactly what I was looking for. I wanted a site that could render GitHub style markdown as well as highlight code blocks. It took me a day to figure out how to implement everything and I thought other people might be interested in the same features. So I put together this guide that is a combination of what I learned and the tutorials from [CSS-Tricks](https://css-tricks.com/building-a-blog-with-next-js/), [Perry Raskin](https://raskin.me/blog/beautify-code-in-your-next-js-blog), and [Jose Felix] (https://dev.to/jfelx/how-to-make-a-static-blog-with-next-js-2bd6). This guide will be for a very basic site. I'll add another post that will address more features such as SEO at a later time.\n\n## Initial Setup\n\nTo start off, we’ll use Next.js’s app boilerplate to generate an initial project\n\n```sh\nnpx create-next-app \u003cblog name\u003e --use-npm\n```\n\nOnce the script is complete, _cd_ into the project directory. You'll be able to see the boilerplate app at [http://localhost:3000](http://localhost:3000) after running\n\n```sh\nnpm run dev\n```\n\nWe'll need a few packages for the features we want so go ahead and install the required dependencies using\n\n```sh\nnpm install --save-dev raw-loader gray-matter react-markdown react-syntax-highlighter\n```\n\n### raw-loader\n\n[raw-loader](https://www.npmjs.com/package/raw-loader) allows us to import text files as if they were a module using the ES6 import statement\n\n### gray-matter\n\n[gray-matter](https://www.npmjs.com/package/gray-matter) is used to parse the front-matter information in your markdown files\n\n### react-markdown\n\n[react-markdown](https://www.npmjs.com/package/react-markdown) converts markdown files into html\n\n### react-syntax-highlighter\n\n[react-syntax-highlighter](https://www.npmjs.com/package/react-syntax-highlighter) is used as a code block renderer within react-markdown to highlight code blocks\n\n## Create the Static Site\n\nNext.js uses React behind the scenes to render pages. Each React file inside the _/pages_ folder will be rendered as a static page. For example, _/pages/about.js_ will be rendered at _/about_ and _/pages/blog/first-post.js_ at _/blog/first-post_. The only exception is _index.js_, which will be rendered at _/_. Next.js can also handle dynamic routing using slugs and a _\\[slug\\].js_ component. It will also route you to a default 404 page for non-existent components.\n\nThe entry point for Next.js is _/pages/index.js_. You can modify the JSX within it and you'll see Next.js takes care of hot reloading the page with updates. Let's start by deleting _/pages/api_ and simpliflying _Home_ with a placeholder:\n\n#### /pages/index.js\n\n```jsx\n// import Head from 'next/head'\n// import styles from '../styles/Home.module.css'\n\nexport default function Home() {\n  return (\n    \u003cdiv\u003e\n      \u003ch1\u003ehello\u003c/h1\u003e\n    \u003c/div\u003e\n  )\n}\n```\n\nnext let's create two blog posts and place them inside of _\\_posts_ at your project's root directory\n\n#### /\\_posts/first-post.md\n\n```md\n---\ntitle: First Post\ndescription: Sample First Post\ndate: 2020-09-24\n---\n\n# Header 1\n\n## Header 2\n\n### Header 3\n\n#### header 4\n\n## Table of Contents\n\n- Implements [GitHub Flavored Markdown](https://github.github.com/gfm/)\n- Renders actual, \"native\" React DOM elements\n- Allows you to escape or skip HTML (try toggling the checkboxes above)\n- If you escape or skip the HTML, no `dangerouslySetInnerHTML` is used! Yay!\n\n## HTML block below\n\n\u003e This blockquote will change based on the HTML settings above.\n\n## Tables?\n\n| Feature   | Support |\n| --------- | ------- |\n| tables    | ✔       |\n| alignment | ✔       |\n| wewt      | ✔       |\n```\n\n#### /\\_posts/second-post.md\n\n````md\n---\ntitle: Second Post\ndescription: Sample Second Post\ndate: 2020-09-25\n---\n\n## Python code block\n\n```python\nimport numpy as np\n\ndef hello():\n    print('this is working')\n```\n\n## JS code block\n\n```js\nimport React from 'react'\nconsole.log('this is working')\n```\n````\n\nWe'll create two api functions for our app. The first function will find all markdown files in _\\_posts_ and return an object with its front-matter information. The second function will return the contents of a markdown file given its file slug.\n\n#### /api.js\n\n```js\nimport matter from 'gray-matter'\n\nexport const getAllPosts = async () =\u003e {\n  const context = require.context('./_posts', false, /\\.md$/)\n  const posts = []\n  for (const path of context.keys()) {\n    const fileName = path.slice(2)\n    const post = await import(`./_posts/${fileName}`)\n    const content = matter(post.default)\n    posts.push({\n      slug: fileName.replace('.md', ''),\n      title: content.data.title,\n      description: content.data.description,\n    })\n  }\n  return posts\n}\n\nexport const getPostBySlug = async (slug) =\u003e {\n  const post = await import(`./_posts/${slug}.md`)\n  const content = matter(post.default)\n  content.data.date = content.data.date.toString()\n  return {\n    data: content.data,\n    content: content.content,\n  }\n}\n```\n\nBoth functions will import the markdown files using the ES6 import style. For this to work correctly, we'll need to tell Next.js to use raw-loader on the files. This is done with a configuration file. You may need to restart your Next.js development server to ensure this configuration is set. Just to be safe, ctrl+c and restart your dev server.\n\n#### /next.config.js\n\n```js\nmodule.exports = {\n  target: 'serverless',\n  webpack: function (config) {\n    config.module.rules.push({test: /\\.md$/, use: 'raw-loader'})\n    return config\n  },\n}\n```\n\nWe want an array of all posts every time _index.js_ is loaded in order to list them. We can get this by adding the below code to _index.js_. Next.js runs it every time _index.js_ is loaded and passes props to _index.js_'s default function.\n\n#### /pages/index.js\n\n```js\nexport const getStaticProps = async (context) =\u003e {\n  const posts = await getAllPosts()\n  return {\n    props: {\n      posts: posts,\n    },\n  }\n}\n```\n\nLet's go back to _Home_ and modify it now that we're getting an array of all available posts. We'll display each post's title as a link in an unordered list:\n\n#### /pages/index.js\n\n```\nimport Link from 'next/link'\nimport {getAllPosts} from '../api'\n\nexport default function Home({posts}) {\n  return (\n    \u003cdiv\u003e\n      \u003cul\u003e\n        {posts.map((post, i) =\u003e {\n          return (\n            \u003cli key={i}\u003e\n              \u003cLink href={'/blog/[slug]'} as={`/blog/${post.slug}`}\u003e\n                \u003ca\u003e{post.title}\u003c/a\u003e\n              \u003c/Link\u003e\n            \u003c/li\u003e\n          )\n        })}\n      \u003c/ul\u003e\n    \u003c/div\u003e\n  )\n}\n\nexport const getStaticProps = async (context) =\u003e {\n  const posts = await getAllPosts()\n  return {\n    props: {\n      posts: posts,\n    },\n  }\n}\n\n```\n\nWith this you should see a list of your two posts now. They might not look like a typical link though. This is because of Next.js's default css. You can either turn off the entire css by commenting out the import in _/pages/\\_app.js_ or commenting out the _a_ tag css in _/styles/globals.css_.\n\nClicking on the link will result in a 404 route. Let's fix that with dynamic routing. Create a dynamic component with the following code\n\n#### pages/blog/\\[slug\\].js\n\n```jsx\nimport {getPostBySlug, getAllPosts} from '../../api'\nimport ReactMarkdown from 'react-markdown'\n\nconst Post = ({data, content}) =\u003e {\n  return (\n    \u003cdiv className=\"container\"\u003e\n      \u003cdiv className=\"Post\"\u003e\n        \u003cReactMarkdown source={content} /\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n  )\n}\n\nexport const getStaticProps = async (context) =\u003e {\n  return {\n    props: await getPostBySlug(context.params.slug),\n  }\n}\n\nexport const getStaticPaths = async () =\u003e {\n  let paths = await getAllPosts()\n  paths = paths.map((post) =\u003e ({\n    params: {slug: post.slug},\n  }))\n  return {\n    paths: paths,\n    fallback: false,\n  }\n}\n\nexport default Post\n```\n\n_getStaticPaths_ is run first by Next.js and it uses _getAllPosts_ to define a list of paths that have to be rendered to HTML at build time. _getStaticProps_ is then run by Next.js to generate dynamic props that are passed to the file's default component. It find's the dynamic route's slug, and executes _getPostBySlug_ to pass _Post_ the post's data as a prop. That data is the raw post file in string form. Within _Post_ that raw markdown is converted into nicely formatted HTML using _react-markdown_. With the _\\[slug\\].js_ file created, you should be able to click each link and see your sample posts rendered with HTML.\n\nIf you take a look at _post-one_ you'll notice that it's now rendered in HTML but it's not nicely styled the way GitHub handles markdown. If you want the styling to be similar to GitHub, you'll need to install _github-markdown.css_\n\n```sh\nnpm install github-markdown-css\n```\n\nNext you'll need to import the stylesheet globally. This is done in _/pages/\\_app.js_.\n\n#### /pages/\\_app.js\n\n```jsx\nimport 'github-markdown-css/github-markdown.css'\n\nfunction MyApp({Component, pageProps}) {\n  return \u003cComponent {...pageProps} /\u003e\n}\n\nexport default MyApp\n```\n\nAnd one last thing. The styles provided by _github-markdown-css_ target only elements within a _markdown-body_ class. So go back to _\\[slug\\].js_ and add a classname to the _Reactmarkdown_ component\n\n```jsx\n\u003cReactMarkdown source={content} className=\"markdown-body\" /\u003e\n```\n\nNow if you refresh the page, you'll notice a nicely rendered, GitHub style page. However, if you check out _second-post_, you'll see that the codeblocks don't look great. The blocks aren't highlighting the code. Let's take care of that.\n\nBack in _\\[slug\\].js_, we'll need to do a few imports. I'll be using [highlight.js](https://www.npmjs.com/package/highlight.js) but you can use [Prism](https://www.npmjs.com/package/prismjs) if you like. You'll also have to decide on a styling theme. Thankfully, the _react-syntax-highlighter_ team have created a awesome [demo site](https://react-syntax-highlighter.github.io/react-syntax-highlighter/demo/) where you can try out different themes to see what you like. Just select your desired syntax highlighter (_highlight.js_ or _Prism_) then scroll through the different themes until you find something you like. I'll go with the _github_ style for this guide:\n\n```jsx\n//using highlight.js\nimport {Light as SyntaxHighlighter} from 'react-syntax-highlighter'\nconst github = require('react-syntax-highlighter/dist/cjs/styles/hljs/github')\n  .default\n\n//using Prism\nimport {Prism as SyntaxHighlighter} from 'react-syntax-highlighter'\nconst github = require('react-syntax-highlighter/dist/cjs/styles/prism/github')\n  .default\n```\n\nAfter importing those libraries, you'll need to make a code block component and pass that to _ReactMarkdown_ as a renderers prop. You're final _\\[slug\\].js_ should look like this\n\n#### /pages/blog/\\[slug\\].js\n\n```jsx\nimport {getPostBySlug, getAllPosts} from '../../api'\nimport ReactMarkdown from 'react-markdown'\nimport {Light as SyntaxHighlighter} from 'react-syntax-highlighter'\nconst github = require('react-syntax-highlighter/dist/cjs/styles/hljs/github')\n  .default\n\nconst CodeBlock = ({language, value}) =\u003e {\n  return (\n    \u003cSyntaxHighlighter language={language} style={github}\u003e\n      {value}\n    \u003c/SyntaxHighlighter\u003e\n  )\n}\n\nconst Post = ({data, content}) =\u003e {\n  return (\n    \u003cdiv className=\"container\"\u003e\n      \u003cdiv className=\"Post\"\u003e\n        \u003cReactMarkdown\n          source={content}\n          className=\"markdown-body\"\n          renderers={{code: CodeBlock}}\n        /\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n  )\n}\n\nexport const getStaticProps = async (context) =\u003e {\n  console.log('generate static props')\n  console.log(context)\n  return {\n    props: await getPostBySlug(context.params.slug),\n  }\n}\n\nexport const getStaticPaths = async () =\u003e {\n  console.log('generate static paths')\n  let paths = await getAllPosts()\n  paths = paths.map((post) =\u003e ({\n    params: {slug: post.slug},\n  }))\n  console.log(paths)\n  return {\n    paths: paths,\n    fallback: false,\n  }\n}\n\nexport default Post\n```\n\nWith that update, we've completed writing the static site. You can now add posts in markdown format to _/\\_posts_ and your site will dynamically generate links as well as render them into great looking HTML pages. Now we just need to deploy the necessary files to GitHub.\n\n## Deploying to GitHub\n\nI'm assuming you're familiar with how to push repositories to GitHub. So I won't be going over that. There are requirements on repository names, so please checkout[ GitHub Pages](https://pages.github.com/) if you don't already have one setup. The following steps assume that you have set up a GitHub Page repo and have added its link as a remote repository to your local project.\n\nOpen up _package.json_ and add _\"export\": \"next export -o docs\"_ to the _scripts_ object. This will tell Next.js to export your project into static files within the _/docs_ directory. Now, run the following commands\n\n```sh\nnpm run build\nnpm run export\n```\n\nAfter the export is complete, you'll need to add a blank _.nojekyll_ file within the _/docs_ directory. This is because by default _Jekyll_ ignores any folder with a leading underscore. But we're not using _Jekyll_ here and we'll need those leading underscore directories. Finally you'll need to add, commit and push changes to your GitHub repository. With the push finished, you can go to GitHub and change the _Source_ directory of your GitHub Page to _docs_ using this [guide](https://docs.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site). And that's it. It might take a minute for your page to go live, but you have a framework for a blog now.\n\n## Non-Personal GitHub Page\n\nIf you're building a GitHub Page for one of your repos, you'll probably run into problems with page dependencies. Check out this guide by [Mikhail Bashurov](https://itnext.io/next-js-app-on-github-pages-768020f2b65e) to see how to solve that.\n"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"modern-github.io-site"},"buildId":"mYB4tFKSRYB3obKNNDzvF","runtimeConfig":{},"nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-4beebf4ac9054f0bf4e6.js"></script><script src="/_next/static/chunks/main-ceab71ff4af1e6f937e6.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.1d36bc031662b4dc4c28.js" async=""></script><script src="/_next/static/chunks/commons.cb82874e43d6dd0d0fae.js" async=""></script><script src="/_next/static/chunks/pages/_app-99ac7bdef7dc032ee907.js" async=""></script><script src="/_next/static/chunks/caf50c98c9495f1588207cc992c654a0de47b2a6.90d8e29e0d9ce25c09a5.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-d3ea0146524ae2cb3165.js" async=""></script><script src="/_next/static/mYB4tFKSRYB3obKNNDzvF/_buildManifest.js" async=""></script><script src="/_next/static/mYB4tFKSRYB3obKNNDzvF/_ssgManifest.js" async=""></script></body></html>